{"ast":null,"code":"import md5 from'md5';class Api{constructor(apiUrl,authToken){this.apiUrl=apiUrl;this.authToken=authToken;}async getIds(){let offset=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:50;try{const authToken=this.generateAuthToken();const response=await fetch(this.apiUrl,{method:'POST',headers:{'Content-Type':'application/json','X-Auth':authToken},body:JSON.stringify({action:'get_ids',params:{offset,limit}})});const data=await response.json();return data.result;}catch(error){console.error('Error fetching IDs:',error);throw error;}}async getItems(ids){try{const authToken=this.generateAuthToken();const response=await fetch(this.apiUrl,{method:'POST',headers:{'Content-Type':'application/json','X-Auth':authToken},body:JSON.stringify({action:'get_items',params:{ids}})});const data=await response.json();return data.result;}catch(error){console.error('Ошибка при получении товаров:',error);throw error;}}async filter(params){try{const authToken=this.generateAuthToken();const response=await fetch(this.apiUrl,{method:'POST',headers:{'Content-Type':'application/json','X-Auth':authToken},body:JSON.stringify({action:'filter',params})});const data=await response.json();return data.result;}catch(error){console.error('Error filtering items:',error);throw error;}}generateAuthToken(){const timestamp=new Date().toISOString().slice(0,10).replace(/-/g,'');return md5(\"\".concat(this.authToken,\"_\").concat(timestamp));}}export{Api};","map":{"version":3,"names":["md5","Api","constructor","apiUrl","authToken","getIds","offset","arguments","length","undefined","limit","generateAuthToken","response","fetch","method","headers","body","JSON","stringify","action","params","data","json","result","error","console","getItems","ids","filter","timestamp","Date","toISOString","slice","replace","concat"],"sources":["C:/Users/Игорь/dev/valantis/ValantisTestTask/src/Api.js"],"sourcesContent":["import md5 from 'md5';\r\n\r\nclass Api {\r\n  constructor(apiUrl, authToken) {\r\n    this.apiUrl = apiUrl;\r\n    this.authToken = authToken;\r\n  }\r\n\r\n  async getIds(offset = 0, limit = 50) {\r\n    try {\r\n      const authToken = this.generateAuthToken();\r\n      const response = await fetch(this.apiUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-Auth': authToken\r\n        },\r\n        body: JSON.stringify({\r\n          action: 'get_ids',\r\n          params: { offset, limit }\r\n        })\r\n      });\r\n      const data = await response.json();\r\n      return data.result;\r\n    } catch (error) {\r\n      console.error('Error fetching IDs:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getItems(ids) {\r\n    try {\r\n      const authToken = this.generateAuthToken();\r\n      const response = await fetch(this.apiUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-Auth': authToken\r\n        },\r\n        body: JSON.stringify({\r\n          action: 'get_items',\r\n          params: { ids }\r\n        })\r\n      });\r\n      const data = await response.json();\r\n      return data.result;\r\n    } catch (error) {\r\n      console.error('Ошибка при получении товаров:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n\r\n  async filter(params) {\r\n    try {\r\n      const authToken = this.generateAuthToken();\r\n      const response = await fetch(this.apiUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-Auth': authToken\r\n        },\r\n        body: JSON.stringify({\r\n          action: 'filter',\r\n          params\r\n        })\r\n      });\r\n      const data = await response.json();\r\n      return data.result;\r\n    } catch (error) {\r\n      console.error('Error filtering items:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  generateAuthToken() {\r\n    const timestamp = new Date().toISOString().slice(0, 10).replace(/-/g, '');\r\n    return md5(`${this.authToken}_${timestamp}`);\r\n  }\r\n}\r\n\r\nexport { Api };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}